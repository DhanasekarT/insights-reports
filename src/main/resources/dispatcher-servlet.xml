<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:sec="http://www.springframework.org/schema/security"
	xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:oxm="http://www.springframework.org/schema/oxm" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
		http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
		http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-1.5.xsd">
	<mvc:annotation-driven/>
	<tx:annotation-driven />
	<context:component-scan base-package="org.gooru.insights" />
	<context:annotation-config />
	
		<bean
		class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
		<property name="order" value="1" />
		<property name="mediaTypes">
			<map>
				<entry key="json" value="application/json" />
				<entry key="xml" value="application/xml" />
			</map>
		</property>
		<property name="favorPathExtension" value="true" />
		<property name="defaultContentType" value="application/json" />
		<property name="viewResolvers">
				<bean id="viewResolver"
					class="org.springframework.web.servlet.view.InternalResourceViewResolver">
					<property name="order" value="1" />
					<property name="prefix" value="/WEB-INF/jsp/" />
					<property name="suffix" value=".jsp" />
				</bean>
		</property>
		<property name="defaultViews">
				<!-- JSON View -->
				<bean
					class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
		</property>
	</bean>
<!-- 		 <context:property-placeholder location="classpath:config.properties" /> -->
	<bean id="cassandra"
		class="org.springframework.beans.factory.config.PropertiesFactoryBean">
		<property name="properties">
			<props>
				<prop key="cassandra.hosts">${cassandra.hosts}</prop>
				<prop key="cassandra.port">${cassandra.port}</prop>
				<prop key="cassandra.clusterName">${cassandra.clusterName}</prop>
				<prop key="cassandra.keyspace.insights">${cassandra.keyspace.insights}</prop>
                                <prop key="cassandra.keyspace.search">${cassandra.keyspace.search}</prop>
			</props>
		</property>
	</bean>
	
	<bean id="localeResolver"
		class="org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver" />
 	<bean id="restExceptionResolver"
		class="org.gooru.insights.web.servlet.handlers.RestExceptionHandler">
		<property name="order" value="100" />
		<property name="errorResolver">
			<bean
				class="org.gooru.insights.web.servlet.handlers.DefaultRestErrorResolver">
				<property name="localeResolver" ref="localeResolver" />
				<property name="defaultMoreInfoUrl" value="mailto:support@mycompany.com" />
				<property name="exceptionMappingDefinitions">
					<map>
<!-- 						404 -->
					<!-- 	<entry
							key="org.gooru.insights.api.exception.handlers.UnknownResourceException"
							value="404, _exmsg" /> -->
						
						<!-- 403 Access Denied Exception -->
						<entry key="org.springframework.security.access.AccessDeniedException" value="403" />
						
						<!--  400 Bad Request Exception -->
						<!-- <entry key="org.gooru.insights.api.exception.handlers.BadRequestException" value="400" /> -->
												
						<!-- 500 (catch all): -->
						<entry key="Throwable" value="500" />
					</map>
				</property>
			</bean>
		</property>
	</bean>
	</beans>